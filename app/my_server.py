"""
基本的なFastMCPサーバーの実装例

このモジュールは、FastMCPを使った最もシンプルなサーバーの例を示す。
2つの基本的なツール（greet, add）を公開し、クライアントからのRPC呼び出しを受け付ける。

使い方:
    uv run python my_server.py

サーバーは http://localhost:8000 で起動し、/mcp エンドポイントでMCPリクエストを受け付ける。
"""

from fastmcp import FastMCP

# FastMCPサーバーインスタンスを作成
# 引数はサーバーの識別名（クライアントに表示される）
mcp = FastMCP("My MCP Server")


# =============================================================================
# ツールの定義
# @mcp.tool デコレーターで関数をMCPツールとして公開する
# ツールはLLMが呼び出しを決定し、クライアント経由で実行される
# =============================================================================


@mcp.tool
def greet(name: str) -> str:
    """
    シンプルな挨拶を返す

    Args:
        name: 挨拶する相手の名前

    Returns:
        挨拶メッセージ
    """
    return f"Hello, {name}!"


@mcp.tool
def add(a: int, b: int) -> int:
    """
    2つの数値を足し算する

    Args:
        a: 1つ目の整数
        b: 2つ目の整数

    Returns:
        2つの数値の合計
    """
    return a + b


# =============================================================================
# サーバーの起動
# =============================================================================
if __name__ == "__main__":
    # transport="http" でHTTPサーバーとして起動
    # port=8000 でポート8000を使用（デフォルト）
    mcp.run(transport="http", port=8000)
